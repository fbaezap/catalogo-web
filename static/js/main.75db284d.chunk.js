(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(0),c=a.n(n),i=a(9),s=a.n(i),d=(a(91),a(92),a(166)),l=a(167),o=a(70),u=Object(o.a)({palette:{primary:{main:"#582a7a"},secondary:{main:"#c01414"}}}),j=a(11),b=a(158),h=a(160),m=a(149),O=a(161),x=a(156),p=a(21),f=a(153),g=a(157),v=a(155),S=a(154),y=a(151),R=a(28),q=a(22),B=a.n(q);function N(e){return"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var C=a(4),W=Object(m.a)((function(e){return{card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},lineThrough:{textDecoration:"line-through"}}}));function T(e){var t=e.palindrome,a=e.products,n=e.onRefresh,i=W(),s=function(){var e=c.a.useState(!1),t=Object(j.a)(e,2),a=t[0],r=t[1],n=c.a.useState(),i=Object(j.a)(n,2)[1],s=c.a.useState(),d=Object(j.a)(s,2),l=d[0],o=d[1];return{loading:a,error:l,request:c.a.useCallback((function(e){return r(!0),B.a.delete("products/".concat(e)).then((function(e){return i(e.data)})).catch(o).finally((function(){return r(!1)}))}),[])}}(),d=s.loading,l=s.request;return Object(r.jsx)(y.a,{container:!0,spacing:1,children:a.map((function(e){var a;return Object(r.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,children:Object(r.jsxs)(f.a,{className:i.card,children:[Object(r.jsx)(S.a,{className:i.cardMedia,image:null!==(a=e.image)&&void 0!==a?a:"https://source.unsplash.com/random",title:e.name}),Object(r.jsxs)(v.a,{className:i.cardContent,children:[Object(r.jsx)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name}),Object(r.jsx)(x.a,{children:e.id}),Object(r.jsx)(x.a,{children:e.description}),Object(r.jsx)(x.a,{className:Object(C.a)(Object(p.a)({},i.lineThrough,t)),children:N(e.price)}),t&&Object(r.jsx)(x.a,{children:N(.8*e.price)})]}),Object(r.jsxs)(g.a,{children:[Object(r.jsx)(b.a,{component:R.b,to:"/products/edit/".concat(e._id),size:"small",color:"primary",disabled:d,children:"Editar"}),Object(r.jsx)(b.a,{size:"small",color:"secondary",onClick:function(){return l(e._id).then((function(){return n()}))},disabled:d,children:"Borrar"})]})]})},e._id)}))})}var P=a(162),k=a(169),F=a(164),G=a(170),M=a(168),w=a(159),D=a(49);function E(e){var t=e.onSubmit,a=Object(D.a)({mode:"all",defaultValues:{type:"other"}});return Object(r.jsx)("form",{onSubmit:a.handleSubmit(t),children:Object(r.jsxs)(y.a,{container:!0,spacing:1,alignItems:"center",children:[Object(r.jsx)(y.a,{item:!0,children:Object(r.jsx)(M.a,{inputRef:a.register(),name:"search",id:"search",label:"Buscar",variant:"filled"})}),Object(r.jsx)(y.a,{item:!0,children:Object(r.jsxs)(M.a,{inputRef:a.register(),select:!0,name:"type",id:"type",label:"Buscar por",variant:"filled",SelectProps:{native:!0},children:[Object(r.jsx)("option",{value:"other",children:"Marca y descripci\xf3n"}),Object(r.jsx)("option",{value:"id",children:"ID"})]})}),Object(r.jsx)(y.a,{item:!0,children:Object(r.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",children:Object(r.jsx)(w.a,{})})})]})})}var I=Object(m.a)((function(e){return{title:{flexGrow:1},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}}));function A(){var e=I(),t=c.a.useState(),a=Object(j.a)(t,2),n=a[0],i=a[1],s=c.a.useState(!1),d=Object(j.a)(s,2),l=d[0],o=d[1],u=c.a.useState(!1),m=Object(j.a)(u,2),p=m[0],f=m[1],g=c.a.useState(),v=Object(j.a)(g,2),S=v[0],y=v[1],q=c.a.useState(),N=Object(j.a)(q,2),C=N[0],W=N[1],M=c.a.useCallback((function(e){W(void 0),e&&"other"===e.type&&e.search.length<3?W("SEARCH"):(o(!0),B.a.get("products",{params:e}).then((function(t){var a,r;i(null!==(a=null===e||void 0===e?void 0:e.search)&&void 0!==a?a:void 0),f(!!(null===e||void 0===e?void 0:e.search)&&(r=e.search).split("").reverse().join("")===r),y(t.data)})).catch((function(e){W("UNKNOWN")})).finally((function(){return o(!1)})))}),[]);return c.a.useEffect((function(){M()}),[]),Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(h.a,{position:"relative",children:Object(r.jsxs)(O.a,{children:[Object(r.jsx)(x.a,{variant:"h6",className:e.title,children:"Productos"}),Object(r.jsx)(b.a,{color:"inherit",component:R.b,to:"/products/create",children:"Crear"})]})}),Object(r.jsx)("main",{children:Object(r.jsxs)(P.a,{className:e.cardGrid,maxWidth:"md",children:[Object(r.jsx)(k.a,{marginBottom:2,children:Object(r.jsx)(E,{onSubmit:function(e){return M(e.search&&e.type?e:void 0)}})}),C&&Object(r.jsx)(k.a,{marginBottom:2,children:Object(r.jsx)(G.a,{severity:"error",children:"SEARCH"===C?"Si buscas por nombre deben haber al menos 3 caracteres":"Ha ocurrido un error"})}),l&&Object(r.jsx)(k.a,{textAlign:"center",children:Object(r.jsx)(F.a,{})}),S&&!l&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(x.a,{paragraph:!0,children:n?'Mostrando resultados de "'.concat(n,'"'):"Mostrando todos los resultados"}),S.length?Object(r.jsx)(T,{products:S,onRefresh:M,palindrome:p}):Object(r.jsx)(x.a,{children:"No hay productos"})]})]})})]})}var V=a(12),L=a(163);function U(e){var t=e.id,a=e.onResult,r=e.children,n=c.a.useState(!1),i=Object(j.a)(n,2),s=i[0],d=i[1];return r(c.a.useCallback((function(e){d(!0),B.a.request({method:t?"PUT":"POST",url:"products/".concat(null!==t&&void 0!==t?t:""),data:e}).then((function(e){return a(e.data)})).catch((function(e){return a(void 0,e)})).finally((function(){return d(!1)}))}),[t,a]),s)}function z(e){var t=e.id,a=e.defaultValues,n=e.onResult,c=Object(D.a)({mode:"all",defaultValues:a});return Object(r.jsx)(U,{id:t,onResult:n,children:function(e,t){return Object(r.jsx)("form",{onSubmit:c.handleSubmit(e),children:Object(r.jsxs)(y.a,{container:!0,spacing:1,children:[Object(r.jsx)(y.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(M.a,{fullWidth:!0,required:!0,inputRef:c.register({required:!0}),name:"id",id:"id",label:"ID",variant:"filled"})}),Object(r.jsx)(y.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(M.a,{fullWidth:!0,required:!0,inputRef:c.register({required:!0}),name:"name",id:"name",label:"Nombre",variant:"filled"})}),Object(r.jsx)(y.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(M.a,{fullWidth:!0,required:!0,inputRef:c.register({required:!0}),name:"brand",id:"brand",label:"Marca",variant:"filled"})}),Object(r.jsx)(y.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(M.a,{fullWidth:!0,required:!0,inputRef:c.register({required:!0,valueAsNumber:!0}),name:"price",id:"price",label:"Precio",variant:"filled",type:"number"})}),Object(r.jsx)(y.a,{item:!0,xs:12,children:Object(r.jsx)(M.a,{fullWidth:!0,required:!0,inputRef:c.register({required:!0}),name:"description",id:"description",label:"Descripci\xf3n",variant:"filled",multiline:!0})}),Object(r.jsx)(y.a,{item:!0,xs:12,children:Object(r.jsx)(M.a,{fullWidth:!0,required:!0,inputRef:c.register(),name:"image",id:"image",label:"URL Image",variant:"filled",type:"url"})}),Object(r.jsx)(y.a,{item:!0,xs:12,children:Object(r.jsx)(b.a,{type:"submit",color:"primary",variant:"contained",disabled:!c.formState.isValid||t,children:"Guardar"})})]})})}})}var H=a(165),_=Object(m.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}}));function J(){var e=_(),t=Object(V.h)().id,a=c.a.useState(Boolean(t)),n=Object(j.a)(a,2),i=n[0],s=n[1],d=c.a.useState(),l=Object(j.a)(d,2),o=l[0],u=l[1],b=c.a.useState(),m=Object(j.a)(b,2)[1];c.a.useEffect((function(){t&&(s(!0),B.a.get("products/".concat(t)).then((function(e){return u(e.data)})).catch((function(e){return m(e)})).finally((function(){return s(!1)})))}),[t]);var p=Object(V.g)();return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(h.a,{position:"relative",children:Object(r.jsxs)(O.a,{children:[Object(r.jsx)(L.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",component:R.b,to:"/products",children:Object(r.jsx)(H.a,{})}),Object(r.jsx)(x.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Crear Producto"})]})}),Object(r.jsx)("main",{children:Object(r.jsx)(P.a,{className:e.cardGrid,maxWidth:"md",children:i?Object(r.jsx)(k.a,{textAlign:"center",children:Object(r.jsx)(F.a,{})}):Object(r.jsx)(z,{id:t,defaultValues:o,onResult:function(e){return e?p.push("/products"):void 0}})})})]})}var K=function(){return Object(r.jsxs)(d.a,{theme:u,children:[Object(r.jsx)(l.a,{}),Object(r.jsx)(R.a,{basename:"/",children:Object(r.jsxs)(V.d,{children:[Object(r.jsx)(V.b,{path:"/products/create",children:Object(r.jsx)(J,{})}),Object(r.jsx)(V.b,{path:"/products/edit/:id",children:Object(r.jsx)(J,{})}),Object(r.jsx)(V.b,{path:"/products",children:Object(r.jsx)(A,{})}),Object(r.jsx)(V.a,{to:"/products"})]})})]})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,172)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),c(e),i(e)}))};B.a.defaults.baseURL="https://ecommerce-fbaeza.herokuapp.com/",s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),$()},91:function(e,t,a){},92:function(e,t,a){}},[[116,1,2]]]);
//# sourceMappingURL=main.75db284d.chunk.js.map